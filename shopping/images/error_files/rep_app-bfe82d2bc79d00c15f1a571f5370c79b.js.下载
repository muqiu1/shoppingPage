function RadarFactory(t,e){function n(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}if(this.init=function(){},t){var o=t.offsetWidth,a=t.offsetHeight,r=t.offsetLeft,l=t.offsetTop,s=document.createElement("canvas");t.appendChild(s);var d=(s=t.getElementsByTagName("canvas")[0]).getContext("2d"),f=n(d)||1;s.width=o*f,s.height=a*f,s.style.width=o+"px",s.style.height=a+"px";var y=u({scale:1,origin:[s.width/2,s.height/2],showTooltip:!1},e.config),p=.5*Math.min(s.width,s.height)*.6*y.scale;y.font.fontSize=y.font.fontSize||12*f,y.font.waterFontSize=y.font.waterFontSize||14*f,y.radius=y.radius?y.radius:p,y.bg=u({layer:7,evenFillStyle:"#fff",oddFillStyle:"#eee",evenStrokeStyle:"#ddd",oddStrokeStyle:"#ddd"},y.bg),y.dataFill=u({fillStyle:"transparent"},y.dataFill),y.dataLine=u({strokeStyle:"red",lineWidth:2*f},y.dataLine),y.dataCircle=u({r:2*f,strokeStyle:"red",lineWidth:2*f,fillStyle:"#fff"},y.dataCircle),y.tooltip=u({r:y.dataCircle.r,offsetX:0,offsetY:0},y.tooltip),y.font=u({fontStyle:y.font.fontSize+"px Pingfang SC,STHeiti,Lantinghei SC,Open Sans,Arial,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,SimSun,sans-serif",fontColor:"#000",waterFontStyle:y.font.waterFontSize+"px Pingfang SC,STHeiti,Lantinghei SC,Open Sans,Arial,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,SimSun,sans-serif",waterFontColor:"#F0F0F0",mathColor:"#000"},y.font);var c=u({description:[],tooltipsString:[],maxValue:[],value:[],percent:[]},e.data),S={};function h(){var t=c.value?c.value.length:0;S.n=t,S.dataRadiusOfPercent=[],S.dataRadius=[],S.angleArr=[],S.tooltipsContentArr=[];for(var e=2*Math.PI/S.n,i=0;i<t;i++)S.dataRadiusOfPercent[i]=c.value[i]/c.maxValue[i],S.dataRadius[i]=S.dataRadiusOfPercent[i]*y.radius,S.angleArr[i]=i*e,y.showTooltip&&("function"==typeof c.tooltipsString?S.tooltipsContentArr[i]=c.tooltipsString(c.description[i],c.value[i],c.maxValue[i]):"String"==typeof c.tooltipsString?S.tooltipsContentArr[i]=c.tooltipsString:S.tooltipsContentArr[i]=c.description[i]+": <br>\u6700\u5927\u503c: "+c.maxValue[i]+"<br>\u5f53\u524d\u503c\uff1a"+c.value[i])}function g(){var t=0,e=null;!function i(){e=window.requestAnimationFrame(i,s),(t+=.05)>=1&&window.cancelAnimationFrame(e);var n=S.dataRadius.map(function(e){return e*t}),o=v(S.n,y.radius,n,S.angleArr);d.clearRect(0,0,s.width,s.height),W({data:[c.projectName,c.projectPath],origin:y.origin,spacing:25*f,lineCount:6,fontColor:y.font.waterFontColor,fontStyle:y.font.waterFontStyle}),b({n:S.n,r:y.radius,data:c.description,drawWhiteBg:!!c.projectName,mathData:c.value,percent:c.percent,origin:y.origin,fontStyle:y.font.fontStyle,fontColor:y.font.fontColor,mathColor:y.font.mathColor}),R({layer:y.bg.layer,n:S.n,r:y.radius,origin:y.origin,evenFillStyle:y.bg.evenFillStyle,oddFillStyle:y.bg.oddFillStyle,evenStrokeStyle:y.bg.evenStrokeStyle,oddStrokeStyle:y.bg.oddStrokeStyle}),C({dataLineOptions:{dataPoints:o,strokeStyle:y.dataLine.strokeStyle,lineWidth:y.dataLine.lineWidth},dataFillOptions:{dataPoints:o,fillStyle:y.dataFill.fillStyle},dataCircleOptions:{dataPoints:o,r:y.dataCircle.r,strokeStyle:y.dataCircle.strokeStyle,fillStyle:y.dataCircle.fillStyle,lineWidth:y.dataCircle.lineWidth}})}()}function u(t,e){var i={};for(var n in t)i[n]=t[n];for(var n in e)i[n]=e[n];return i}function v(t,e,i,n){t=t||6,i=i||[],n=n||[];for(var o=[],a=0;a<t;a++){var r={};r.x=i[a]*Math.sin(n[a]),r.y=-i[a]*Math.cos(n[a]),o.push(r)}return o}function C(t){var e=t.dataLineOptions||{},i=t.dataFillOptions||{},n=t.dataCircleOptions||{};m(e),x(i),P(n)}function m(t){var e=t.strokeStyle?t.strokeStyle:"red",i=t.lineWidth?t.lineWidth:2,n=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=n.length,dataPointsPosArrayLen=n.length,d.save(),d.beginPath(),d.translate(y.origin[0],y.origin[1]),d.moveTo(n[0].x,n[0].y);for(var o=1;o<dataPointsPosArrayLen;o++)d.lineTo(n[o].x,n[o].y);d.closePath(),d.strokeStyle=e,d.lineWidth=i,d.lineJoin="round",d.stroke(),d.restore()}function x(t){var e=t.fillStyle?t.fillStyle:"transparent",i=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=i.length,d.save(),d.beginPath(),d.translate(y.origin[0],y.origin[1]),d.moveTo(i[0].x,i[0].y);for(var n=1;n<dataPointsPosArrayLen;n++)d.lineTo(i[n].x,i[n].y);d.closePath(),d.fillStyle=e,d.fill(),d.restore()}function P(t){var e=t.r?t.r*f:1*f,i=t.strokeStyle?t.strokeStyle:"#000",n=t.lineWidth?t.lineWidth*f:1*f,o=t.fillStyle?t.fillStyle:"#222",a=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=a.length;for(var r=0;r<dataPointsPosArrayLen;r++)k({x:a[r].x,y:a[r].y,r:e,originX:y.origin[0],originY:y.origin[1],strokeStyle:i,lineWidth:n,fillStyle:o})}function k(t){var e=t.x?t.x:0,i=t.y?t.y:0,n=t.r?t.r:10,o=t.originX?t.originX:0,a=t.originY?t.originY:0,r=t.strokeStyle?t.strokeStyle:"#000",l=t.lineWidth?t.lineWidth:2,s=t.fillStyle?t.fillStyle:"#fff";d.save(),d.beginPath(),d.translate(o,a),d.arc(e,i,n,0,2*Math.PI),d.closePath(),d.strokeStyle=r,d.lineWidth=l,d.lineJoin="round",d.fillStyle=s,d.stroke(),d.fill(),d.restore()}function F(e){var i=e.tooltipEle?e.tooltipEle:null,n=e.tootipContentArray?e.tootipContentArray:[],o=e.tooltipOffsetX?e.tooltipOffsetX:0,a=e.tooltipOffsetY?e.tooltipOffsetY:0,s=e.dataCircleRadius?e.dataCircleRadius:10,d=v(S.n,y.radius,S.dataRadius,S.angleArr);if(dataPointsPosArrayLen=d.length,i){var f=!1,p=i;t.addEventListener("mousemove",function(t){for(var e=0;e<dataPointsPosArrayLen;e++){f=!1;if(d[e]&&Math.pow(t.pageX-r-d[e].x-y.origin[0],2)+Math.pow(t.pageY-l-d[e].y-y.origin[1],2)<=Math.pow(s,2)){p.style.left=t.pageX-r+o+"px",p.style.top=t.pageY-l+a+"px",p.innerHTML=n[e],f=!0;break}}p.style.display=f?"block":"none"})}}function A(t,e,n){t=t||5,e=e||30;var o=[],a=2*Math.PI/t;for(i=0;i<t;i++){var r={};r.x=e*Math.sin(i*a)+n[0],r.y=-e*Math.cos(i*a)+n[1],o.push(r)}return o}function w(t){var e=t.n?t.n:5,n=t.r?t.r:30,o=t.origin?t.origin:[0,0],a=t.fillStyle?t.fillStyle:"transparent",r=t.strokeStyle?t.strokeStyle:"#000",l=t.lineWidth?t.lineWidth*f:1*f,s=t.lineCap?t.lineCap:"butt";d.save(),d.beginPath();var y=2*Math.PI/e;for(d.translate(o[0],o[1]),d.moveTo(0,-n),i=0;i<e;i++)d.rotate(y),d.lineTo(0,-n);d.closePath(),t.strokeStyle&&(d.strokeStyle=r,d.lineWidth=l,d.lineCap=s,d.stroke()),t.fillStyle&&(d.fillStyle=a,d.fill()),d.restore()}function W(t){var e=0,i=t.data?t.data:[],n=t.origin?t.origin:[0,0],o=t.fontStyle?t.fontStyle:"",a=t.fontColor?t.fontColor:"#000",r=t.lineCount?t.lineCount:5,l=t.spacing?t.spacing:30;if(i[0]&&"function"==typeof Array.prototype.fill){for(var s=0;s<i.length;s++)i[s]=Array(8).fill(i[s]).join(" ");d.font=o,d.fillStyle=a,d.textAlign="center";for(s=0;s<r;s++){var f=1+(r-1)/2,y=n[0]-(f-s-1)*l,p=n[1]-(f-s-1)*l;d.fillText(i[e],y,p),e=e<i.length-1?e+1:0}d.restore()}}function b(t){var e=t.data?t.data:[],i=t.mathData?t.mathData:[],n=t.percent?t.percent:[],o=t.n?t.n:5,a=t.r?t.r:30,r=t.origin?t.origin:[0,0],l=t.limit?t.limit:20,s=t.fontStyle?t.fontStyle:"",p=t.fontColor?t.fontColor:"#000",c=t.mathColor?t.mathColor:"#000",S=A(o,a,r);d.save(),d.font=s;for(var h=0;h<e.length;h++){var g=S[h].x,u=S[h].y;if(Math.abs(S[h].x-r[0])>=l?S[h].x-r[0]>0?(d.textAlign="left",g+=12):S[h].x-r[0]<0&&(d.textAlign="right",g-=12):d.textAlign="center",Math.abs(S[h].y-r[1])>=a-l&&(S[h].y-r[1]<0?u-=y.font.fontSize+1*f+12:S[h].y-r[1]>0&&(u+=18,"left"===d.textAlign&&(g-=6),"right"===d.textAlign&&(g+=6))),t.drawWhiteBg){var v=68*f,C=28*f,m=5*f,x=12*f;"right"===d.textAlign&&(m=v-m),"center"===d.textAlign&&(m=v/2),d.fillStyle="white",d.fillRect(g-m,u-x,v,C)}d.fillStyle=p,d.fillText(e[h],g,u),d.fillStyle=c,IsN=isNaN(n[h])?"":" (>"+n[h]+"%)",d.fillText((100*i[h]).toFixed(0)+IsN,g,u+y.font.fontSize+1*f)}d.restore()}function R(t){for(var e=t.layer?t.layer:5,i=t.n?t.n:5,n=t.r?t.r:50,o=t.origin?t.origin:[0,0],a=t.evenStrokeStyle?t.evenStrokeStyle:"#ccc",r=t.oddStrokeStyle?t.oddStrokeStyle:"#ccc",l=t.evenFillStyle?t.evenFillStyle:"#eee",s=t.oddFillStyle?t.oddFillStyle:"transparent",f=[],y=n/e,p=0;p<e;p++)f[p]=y*(p+1);f=f.reverse();for(p=0;p<e;p++)w(p%2!=0?{n:i,r:f[p],origin:o,fillStyle:l,strokeStyle:a,lineWidth:1}:{n:i,r:f[p],origin:o,fillStyle:s,strokeStyle:r,lineWidth:1});d.save(),d.beginPath();var c=A(i,n,o);for(p=0;p<i;p++)d.moveTo(o[0],o[1]),d.lineTo(c[p].x,c[p].y);d.strokeStyle=a,d.lineWidth=1,d.stroke(),d.restore()}this.init=function(){h(),t.style.position="relative",g(),y.showTooltip&&(S.tooltipEle=document.createElement("div"),S.tooltipEle.className="radar-tooltips",S.tooltipEle.style.position="absolute",S.tooltipEle.style.display="none",t.appendChild(S.tooltipEle),F({tooltipEle:t.getElementsByClassName("radar-tooltips")[0],tootipContentArray:S.tooltipsContentArr,tooltipOffsetX:y.tooltip.offsetX,tooltipOffsetY:y.tooltip.offsetY,dataCircleRadius:y.tooltip.r}))},this.getPolygonPos=function(){A(S.n,y.radius,y.origin)}}}var radarChart={init:function(t,e){new RadarFactory(t,e).init()}};window.__radarLocales={"zh-CN":{property:["\u4ee3\u7801\u6d3b\u8dc3\u5ea6","\u793e\u533a\u6d3b\u8dc3\u5ea6","\u56e2\u961f\u5065\u5eb7","\u6d41\u884c\u8d8b\u52bf","\u5f71\u54cd\u529b"],transcend:{header:"\u8d85\u8fc7 ",end:" \u9879\u76ee",text:"Gitee \u6307\u6570",exponent:" Gitee \u6307\u6570\u4e3a"},nodata:"\u9884\u8ba1\u4e00\u5468\u540e\u63d0\u4f9b Gitee \u6307\u6570",updatetime:"\u4e0a\u6b21\u66f4\u65b0\u4e8e "},"zh-TW":{property:["\u7a0b\u5f0f\u78bc\u6d3b\u8e8d\u5ea6","\u793e\u5340\u6d3b\u8e8d\u5ea6","\u5718\u968a\u5065\u5eb7","\u6d41\u884c\u8da8\u52e2","\u5f71\u97ff\u529b"],transcend:{header:"\u8d85\u904e ",end:" \u9805\u76ee",text:"Gitee \u6307\u6578",exponent:" Gitee \u6307\u6578\u70ba"},nodata:"\u9810\u8a08\u4e00\u5468\u5f8c\u63d0\u4f9b Gitee \u6307\u6578",updatetime:"\u4e0a\u6b21\u66f4\u65b0\u65bc "},en:{property:["Activity","Community","Health","Trend","Influence"],transcend:{header:"surpass ",end:" projects",text:"Gitee Metrics",exponent:" gitee rank is"},nodata:"Gitee Rank is expected to be provided in a week",updatetime:"Last update on "}};var isRadarChartInited=!1;$(window.initRadarChart=function(){if(!isRadarChartInited){var t,e=gon.locale||"zh-CN",i=window.__radarLocales,n=[.15,.2,.1,.25,.3],o=i[e],a=$(".radar-qa"),r=$("#metrics-radar"),l=r.find(".wrap"),s=r.find(".radar-popup"),d=r.find(".total-score"),f=d.find(".text"),y=d.find(".score"),p=r.data("url"),c=$(".finaltime"),S={config:{bg:{layer:3,evenFillStyle:"#F2F4F6",oddFillStyle:"#F8F9FA",evenStrokeStyle:"#DCE3E8",oddStrokeStyle:"#DCE3E8"},dataFill:{fillStyle:"RGBA(254, 115, 0, .2)"},dataLine:{strokeStyle:"RGBA(254, 115, 0, .5)",lineWidth:2},dataCircle:{r:3,strokeStyle:"transparent",fillStyle:"transparent",lineWidth:2},font:{fontColor:"#537C8D",mathColor:"#9B9B9B"}}};l.height(191),radarChart.init(l[0],S),p&&$.getJSON(p).success(function(e){var i=e;if(null===i)return r.html('<span class="text-muted">'+o.nodata+"</span>"),void s.remove();var p=[i.vitality,i.community,i.health,i.trend,i.influence],h=[i.vitality_percent,i.community_percent,i.health_percent,i.trend_percent,i.influence_percent],g=0,u=[],v=o.property,C=[],m=$.extend({},S,{data:{maxValue:C,value:p,projectName:i.project_name,projectPath:i.project_path,description:v,percent:u}});for(m.config.dataCircle.strokeStyle="#FE7300",m.config.dataCircle.fillStyle="#FE7300",t=0;t<h.length;++t)u.push(parseInt(100*h[t],0)),C.push(1),g+=Number(100*p[t])*n[t];l.find("canvas").remove(),radarChart.init(l[0],m),l.removeClass("skeleton"),c.html(o.updatetime+i.updated_at.substring(0,10)),f.text(o.transcend.text),y.text(g.toFixed(0)),d.removeClass("hide"),a.css("display","inline").popup({hoverable:!0,popup:s}),isRadarChartInited=!0})}});